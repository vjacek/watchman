<!doctype html>
<html lang='en'>
<head>
    <meta charset='utf-8'>
    <title>stream</title>
    <script src='/jquery-2.2.3.min.js'></script>
    <script src='/socket.io/socket.io.js'></script>
</head>
<body>
    <canvas id="canvas" width="640" height="480" style="border:solid;"></canvas>

    <script>

    var socket = io.connect('http://localhost:8080');

    socket.emit('client-here');

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    // Listen for camera data from clients
    socket.on('stream', function(imageBuffer) {
        var blob = new Blob([imageBuffer], {type: "image/png"});
        var ctx = document.getElementById('canvas').getContext('2d');
        var img = new Image;
        img.onload = function() {
            ctx.drawImage(img, 0, 0);
            URL.revokeObjectURL(img.src)
        }
        img.src = URL.createObjectURL(blob);
    });


    </script>
</body>
</html>
